/**
 * SMS Reader Utility
 * 
 * IMPORTANT BROWSER LIMITATIONS:
 * - Web browsers CANNOT access SMS messages directly for privacy/security
 * - WebOTP API only works for OTP messages on Chrome Android 84+
 * - This is a browser security feature, not a bug
 * 
 * BEST ALTERNATIVE:
 * - Users should copy-paste SMS content (works on ALL devices)
 * - This provides the best user experience across all platforms
 */

export interface SMSReaderResult {
  success: boolean;
  sender?: string;
  content?: string;
  error?: string;
}

/**
 * Attempts to read SMS using WebOTP API (Chrome Android only)
 * This ONLY works for OTP-format messages and requires user permission each time
 */
export async function readLatestSMS(): Promise<SMSReaderResult> {
  // Check if browser supports Web OTP API
  if (!('OTPCredential' in window)) {
    return {
      success: false,
      error: 'SMS_NOT_SUPPORTED',
    };
  }

  try {
    // Request OTP from SMS
    // This will show a system prompt for the user to select an SMS
    const abortController = new AbortController();
    
    // Timeout after 60 seconds
    setTimeout(() => abortController.abort(), 60000);

    const otpCredential = await navigator.credentials.get({
      // @ts-ignore - OTPCredential is experimental
      otp: { transport: ['sms'] },
      signal: abortController.signal,
    }) as any;

    if (otpCredential && otpCredential.code) {
      // We got an OTP code
      return {
        success: true,
        sender: 'UNKNOWN', // WebOTP API doesn't provide sender info
        content: `Your OTP: ${otpCredential.code}`,
      };
    }

    return {
      success: false,
      error: 'NO_SMS_FOUND',
    };
  } catch (error: any) {
    console.error('SMS reading error:', error);
    
    if (error.name === 'AbortError') {
      return {
        success: false,
        error: 'TIMEOUT',
      };
    }

    if (error.name === 'NotAllowedError') {
      return {
        success: false,
        error: 'PERMISSION_DENIED',
      };
    }

    return {
      success: false,
      error: 'UNKNOWN_ERROR',
    };
  }
}

/**
 * Get user-friendly error messages
 */
export function getSMSReaderErrorMessage(error: string, language: string = 'en'): string {
  const messages: Record<string, Record<string, string>> = {
    SMS_NOT_SUPPORTED: {
      en: 'Automatic SMS reading is not supported on this browser. Please use Chrome on Android (version 84+) or copy-paste the SMS content.',
      hi: 'рдЗрд╕ рдмреНрд░рд╛рдЙрдЬрд╝рд░ рдкрд░ рд╕реНрд╡рдЪрд╛рд▓рд┐рдд SMS рдкрдврд╝рдирд╛ рд╕рдорд░реНрдерд┐рдд рдирд╣реАрдВ рд╣реИред рдХреГрдкрдпрд╛ Android рдкрд░ Chrome (рд╕рдВрд╕реНрдХрд░рдг 84+) рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВ рдпрд╛ SMS рд╕рд╛рдордЧреНрд░реА рдХреЛ рдХреЙрдкреА-рдкреЗрд╕реНрдЯ рдХрд░реЗрдВред',
      pa: 'риЗри╕ римрйНри░ри╛риКриЬри╝ри░ 'ридрйЗ риЖриЯрйЛриорйИриЯри┐риХ SMS рикрйЬрйНри╣риири╛ ри╕риори░риери┐рид риири╣рйАриВ ри╣рйИред риХри┐ри░рикри╛ риХри░риХрйЗ Android 'ридрйЗ Chrome (ри╕рй░ри╕риХри░риг 84+) ри╡ри░ридрйЛ риЬри╛риВ SMS ри╕риорй▒риЧри░рйА риирйВрй░ риХри╛рикрйА-рикрйЗри╕риЯ риХри░рйЛред',
      ta: 'роЗроирпНрод роЙро▓ро╛ро╡ро┐ропро┐ро▓рпН родро╛ройро┐ропроЩрпНроХро┐ SMS ро╡ро╛роЪро┐рокрпНрокрпБ роЖродро░ро┐роХрпНроХрокрпНрокроЯро╡ро┐ро▓рпНро▓рпИ. Android роЗро▓рпН Chrome (рокродро┐рокрпНрокрпБ 84+) роРрокрпН рокропройрпНрокроЯрпБродрпНродро╡рпБроорпН роЕро▓рпНро▓родрпБ SMS роЙро│рпНро│роЯроХрпНроХродрпНродрпИ роироХро▓рпЖроЯрпБродрпНродрпБ роТроЯрпНроЯро╡рпБроорпН.',
      te: 'р░И р░мр▒Нр░░р▒Мр░Ьр░░р▒НтАМр░▓р▒Л р░Жр░Яр▒Лр░ор▒Зр░Яр░┐р░Хр▒Н SMS р░Ър░жр░╡р░бр░В р░╕р░кр▒Лр░░р▒Нр░Яр▒Н р░Ър▒Зр░пр░мр░бр░жр▒Б. р░жр░пр░Ър▒Зр░╕р░┐ Android р░▓р▒Л Chrome (р░╡р▒Жр░░р▒Нр░╖р░ир▒Н 84+) р░Йр░кр░пр▒Лр░Чр░┐р░Вр░Ър░Вр░бр░┐ р░▓р▒Зр░жр░╛ SMS р░Хр░Вр░Яр▒Жр░Вр░Яр▒НтАМр░ир▒Б р░Хр░╛р░кр▒А-р░кр▒Зр░╕р▒Нр░Яр▒Н р░Ър▒Зр░пр░Вр░бр░┐.',
      kn: 'р▓И р▓мр│Нр▓░р│Мр▓╕р▓░р│НтАМр▓ир▓▓р│Нр▓▓р▓┐ р▓╕р│Нр▓╡р▓пр▓Вр▓Ър▓╛р▓▓р▓┐р▓д SMS р▓Ур▓жр│Бр▓╡р▓┐р▓Хр│Ж р▓мр│Жр▓Вр▓мр▓▓р▓┐р▓др▓╡р▓╛р▓Чр▓┐р▓▓р│Нр▓▓. р▓жр▓пр▓╡р▓┐р▓Яр│Нр▓Яр│Б Android р▓ир▓▓р│Нр▓▓р▓┐ Chrome (р▓Жр▓╡р│Гр▓др│Нр▓др▓┐ 84+) р▓мр▓│р▓╕р▓┐ р▓Ер▓ер▓╡р▓╛ SMS р▓╡р▓┐р▓╖р▓пр▓╡р▓ир│Нр▓ир│Б р▓ир▓Хр▓▓р▓┐р▓╕р▓┐-р▓Ер▓Вр▓Яр▓┐р▓╕р▓┐.',
      ml: 'р┤И р┤мр╡Нр┤░р╡Чр┤╕р┤▒р┤┐р╡╜ р┤Ур┤Яр╡Нр┤Яр╡Лр┤ор┤╛р┤▒р╡Нр┤▒р┤┐р┤Хр╡Н SMS р┤╡р┤╛р┤пр┤и р┤кр┤┐р┤ир╡Нр┤др╡Бр┤гр┤пр╡Нр┤Хр╡Нр┤Хр╡Бр┤ир╡Нр┤ир┤┐р┤▓р╡Нр┤▓. р┤жр┤пр┤╡р┤╛р┤пр┤┐ Android-р╡╜ Chrome (р┤кр┤др┤┐р┤кр╡Нр┤кр╡Н 84+) р┤Йр┤кр┤пр╡Лр┤Чр┤┐р┤Хр╡Нр┤Хр╡Бр┤Х р┤Ер┤▓р╡Нр┤▓р╡Жр┤Щр╡Нр┤Хр┤┐р╡╜ SMS р┤Йр┤│р╡Нр┤│р┤Яр┤Хр╡Нр┤Хр┤В р┤кр┤Хр╡╝р┤др╡Нр┤др┤┐-р┤Тр┤Яр╡Нр┤Яр┤┐р┤Хр╡Нр┤Хр╡Бр┤Х.',
      bn: 'ржПржЗ ржмрзНрж░рж╛ржЙржЬрж╛рж░рзЗ рж╕рзНржмржпрж╝ржВржХрзНрж░рж┐ржпрж╝ SMS ржкржбрж╝рж╛ рж╕ржорж░рзНржерж┐ржд ржиржпрж╝ред ржЕржирзБржЧрзНрж░рж╣ ржХрж░рзЗ Android ржП Chrome (рж╕ржВрж╕рзНржХрж░ржг 84+) ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзБржи ржмрж╛ SMS ржмрж┐рж╖ржпрж╝ржмрж╕рзНрждрзБ ржХржкрж┐-ржкрзЗрж╕рзНржЯ ржХрж░рзБржиред',
      gu: 'ркЖ ркмрлНрк░рк╛ркЙркЭрк░ рккрк░ ркУркЯрлЛркорлЗркЯрк┐ркХ SMS рк╡рк╛ркВркЪрк╡рлБркВ рк╕рккрлЛрк░рлНркЯрлЗркб ркиркерлА. ркХрлГрккрк╛ ркХрк░рлАркирлЗ Android рккрк░ Chrome (рк╡рк░рлНркЭрки 84+) рк╡рк╛рккрк░рлЛ ркЕркерк╡рк╛ SMS рк╕рк╛ркоркЧрлНрк░рлАркирлЗ ркХрлЛрккрлА-рккрлЗрк╕рлНркЯ ркХрк░рлЛ.',
      bho: 'рдПрд╣ рдмреНрд░рд╛рдЙрдЬрд╝рд░ рдкрд░ рдСрдЯреЛрдореИрдЯрд┐рдХ SMS рдкрдврд╝рд▓ рд╕рдкреЛрд░реНрдЯреЗрдб рдирд╛ рдмрд╛ред рдХреГрдкрдпрд╛ Android рдкрд░ Chrome (рд╡рд░реНрдЬрди 84+) рдХреЗ рдЗрд╕реНрддреЗрдорд╛рд▓ рдХрд░реАрдВ рдпрд╛ SMS рд╕рд╛рдордЧреНрд░реА рдХреЗ рдХреЙрдкреА-рдкреЗрд╕реНрдЯ рдХрд░реАрдВред',
      hne: 'рдЗрд╕ рдмреНрд░рд╛рдЙрдЬрд╝рд░ рдкрд░ рдСрдЯреЛрдореИрдЯрд┐рдХ SMS рдкрдврд╝рдирд╛ рд╕рдкреЛрд░реНрдЯреЗрдб рдирд╣реАрдВ рд╣реИред рдХреГрдкрдпрд╛ Android рдкрд░ Chrome (рд╡рд░реНрдЬрди 84+) рдХрд╛ рдЗрд╕реНрддреЗрдорд╛рд▓ рдХрд░реЛ рдпрд╛ SMS рд╕рд╛рдордЧреНрд░реА рдХреЛ рдХреЙрдкреА-рдкреЗрд╕реНрдЯ рдХрд░реЛред',
    },
    NO_SMS_FOUND: {
      en: 'No SMS message was selected. Please try again or copy-paste the message.',
      hi: 'рдХреЛрдИ SMS рд╕рдВрджреЗрд╢ рдЪрдпрдирд┐рдд рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЧрдпрд╛ред рдХреГрдкрдпрд╛ рдкреБрдирдГ рдкреНрд░рдпрд╛рд╕ рдХрд░реЗрдВ рдпрд╛ рд╕рдВрджреЗрд╢ рдХреЛ рдХреЙрдкреА-рдкреЗрд╕реНрдЯ рдХрд░реЗрдВред',
      pa: 'риХрйЛриИ SMS ри╕рйБриирйЗри╣ри╛ риЪрйБригри┐риЖ риири╣рйАриВ риЧри┐риЖред риХри┐ри░рикри╛ риХри░риХрйЗ рижрйБримри╛ри░ри╛ риХрйЛри╕ри╝ри┐ри╕ри╝ риХри░рйЛ риЬри╛риВ ри╕рйБриирйЗри╣рйЗ риирйВрй░ риХри╛рикрйА-рикрйЗри╕риЯ риХри░рйЛред',
      ta: 'роОроирпНрод SMS роЪрпЖропрпНродро┐ропрпБроорпН родрпЗро░рпНроирпНродрпЖроЯрпБроХрпНроХрокрпНрокроЯро╡ро┐ро▓рпНро▓рпИ. роорпАрогрпНроЯрпБроорпН роорпБропро▒рпНроЪро┐роХрпНроХро╡рпБроорпН роЕро▓рпНро▓родрпБ роЪрпЖропрпНродро┐ропрпИ роироХро▓рпЖроЯрпБродрпНродрпБ роТроЯрпНроЯро╡рпБроорпН.',
      te: 'р░П SMS р░╕р░Вр░жр▒Зр░╢р░В р░Ор░Вр░кр░┐р░Х р░Ър▒Зр░пр░мр░бр░▓р▒Зр░жр▒Б. р░жр░пр░Ър▒Зр░╕р░┐ р░ор░│р▒Нр░▓р▒А р░кр▒Нр░░р░пр░др▒Нр░ир░┐р░Вр░Ър░Вр░бр░┐ р░▓р▒Зр░жр░╛ р░╕р░Вр░жр▒Зр░╢р░╛р░ир▒Нр░ир░┐ р░Хр░╛р░кр▒А-р░кр▒Зр░╕р▒Нр░Яр▒Н р░Ър▒Зр░пр░Вр░бр░┐.',
      kn: 'р▓пр▓╛р▓╡р│Бр▓жр│З SMS р▓╕р▓Вр▓жр│Зр▓╢р▓╡р▓ир│Нр▓ир│Б р▓Жр▓пр│Нр▓Хр│Ж р▓ор▓╛р▓бр▓▓р▓╛р▓Чр▓┐р▓▓р│Нр▓▓. р▓жр▓пр▓╡р▓┐р▓Яр│Нр▓Яр│Б р▓ор▓др│Нр▓др│Ж р▓кр│Нр▓░р▓пр▓др│Нр▓ир▓┐р▓╕р▓┐ р▓Ер▓ер▓╡р▓╛ р▓╕р▓Вр▓жр│Зр▓╢р▓╡р▓ир│Нр▓ир│Б р▓ир▓Хр▓▓р▓┐р▓╕р▓┐-р▓Ер▓Вр▓Яр▓┐р▓╕р▓┐.',
      ml: 'р┤Тр┤░р╡Б SMS р┤╕р┤ир╡Нр┤жр╡Зр┤╢р┤╡р╡Бр┤В р┤др┤┐р┤░р┤Юр╡Нр┤Юр╡Жр┤Яр╡Бр┤др╡Нр┤др┤┐р┤▓р╡Нр┤▓. р┤жр┤пр┤╡р┤╛р┤пр┤┐ р┤╡р╡Ар┤гр╡Нр┤Яр╡Бр┤В р┤╢р╡Нр┤░р┤ор┤┐р┤Хр╡Нр┤Хр╡Бр┤Х р┤Ер┤▓р╡Нр┤▓р╡Жр┤Щр╡Нр┤Хр┤┐р╡╜ р┤╕р┤ир╡Нр┤жр╡Зр┤╢р┤В р┤кр┤Хр╡╝р┤др╡Нр┤др┤┐-р┤Тр┤Яр╡Нр┤Яр┤┐р┤Хр╡Нр┤Хр╡Бр┤Х.',
      bn: 'ржХрзЛржи SMS ржмрж╛рж░рзНрждрж╛ ржирж┐рж░рзНржмрж╛ржЪржи ржХрж░рж╛ рж╣ржпрж╝ржирж┐ред ржЕржирзБржЧрзНрж░рж╣ ржХрж░рзЗ ржЖржмрж╛рж░ ржЪрзЗрж╖рзНржЯрж╛ ржХрж░рзБржи ржмрж╛ ржмрж╛рж░рзНрждрж╛ ржХржкрж┐-ржкрзЗрж╕рзНржЯ ржХрж░рзБржиред',
      gu: 'ркХрлЛркИ SMS рк╕ркВркжрлЗрк╢ рккрк╕ркВркж ркХрк░рк╡рк╛ркорк╛ркВ ркЖрк╡рлНркпрлЛ рки рк╣ркдрлЛ. ркХрлГрккрк╛ ркХрк░рлАркирлЗ рклрк░рлА рккрлНрк░ркпрк╛рк╕ ркХрк░рлЛ ркЕркерк╡рк╛ рк╕ркВркжрлЗрк╢ркирлЗ ркХрлЛрккя┐╜я┐╜-рккрлЗрк╕рлНркЯ ркХрк░рлЛ.',
      bho: 'рдХрд╡рдиреЛ SMS рд╕рдВрджреЗрд╢ рд╕реЗрд▓реЗрдХреНрдЯ рдирд╛ рднрдЗрд▓ред рдХреГрдкрдпрд╛ рдлрд┐рд░ рд╕реЗ рдХреЛрд╢рд┐рд╢ рдХрд░реАрдВ рдпрд╛ рд╕рдВрджреЗрд╢ рдХреЗ рдХреЙрдкреА-рдкреЗрд╕реНрдЯ рдХрд░реАрдВред',
      hne: 'рдХреЛрдИ SMS рд╕рдВрджреЗрд╢ рд╕реЗрд▓реЗрдХреНрдЯ рдирд╣реАрдВ рднрдпрд╛ред рдХреГрдкрдпрд╛ рдлрд┐рд░ рд╕реЗ рдХреЛрд╢рд┐рд╢ рдХрд░реЛ рдпрд╛ рд╕рдВрджреЗрд╢ рдХреЛ рдХреЙрдкреА-рдкреЗрд╕реНрдЯ рдХрд░реЛред',
    },
    TIMEOUT: {
      en: 'SMS selection timed out. Please try again.',
      hi: 'SMS рдЪрдпрди рд╕рдордп рд╕рдорд╛рдкреНрдд рд╣реЛ рдЧрдпрд╛ред рдХреГрдкрдпрд╛ рдкреБрдирдГ рдкреНрд░рдпрд╛рд╕ рдХрд░реЗрдВред',
      pa: 'SMS риЪрйЛриг ри╕риори╛риВ ри╕риори╛рикрид ри╣рйЛ риЧри┐риЖред риХри┐ри░рикри╛ риХри░риХрйЗ рижрйБримри╛ри░ри╛ риХрйЛри╕ри╝ри┐ри╕ри╝ риХри░рйЛред',
      ta: 'SMS родрпЗро░рпНро╡рпБ роирпЗро░роорпН роорпБроЯро┐роирпНродродрпБ. роорпАрогрпНроЯрпБроорпН роорпБропро▒рпНроЪро┐роХрпНроХро╡рпБроорпН.',
      te: 'SMS р░Ор░Вр░кр░┐р░Х р░Яр▒Ир░ор▒Н р░Ер░╡р▒Бр░Яр▒Н р░Ер░пр░┐р░Вр░жр░┐. р░жр░пр░Ър▒Зр░╕р░┐ р░ор░│р▒Нр░▓р▒А р░кр▒Нр░░р░пр░др▒Нр░ир░┐р░Вр░Ър░Вр░бр░┐.',
      kn: 'SMS р▓Жр▓пр│Нр▓Хр│Ж р▓╕р▓ор▓п р▓ор│Бр▓Чр▓┐р▓жр▓┐р▓жр│Ж. р▓жр▓пр▓╡р▓┐р▓Яр│Нр▓Яр│Б р▓ор▓др│Нр▓др│Ж р▓кр│Нр▓░р▓пр▓др│Нр▓ир▓┐р▓╕р▓┐.',
      ml: 'SMS р┤др┤┐р┤░р┤Юр╡Нр┤Юр╡Жр┤Яр╡Бр┤кр╡Нр┤кр╡Н р┤╕р┤ор┤пр┤В р┤Хр┤┤р┤┐р┤Юр╡Нр┤Юр╡Б. р┤жр┤пр┤╡р┤╛р┤пр┤┐ р┤╡р╡Ар┤гр╡Нр┤Яр╡Бр┤В р┤╢р╡Нр┤░р┤ор┤┐р┤Хр╡Нр┤Хр╡Бр┤Х.',
      bn: 'SMS ржирж┐рж░рзНржмрж╛ржЪржи рж╕ржоржпрж╝ рж╢рзЗрж╖ред ржЕржирзБржЧрзНрж░рж╣ ржХрж░рзЗ ржЖржмрж╛рж░ ржЪрзЗрж╖рзНржЯрж╛ ржХрж░рзБржиред',
      gu: 'SMS рккрк╕ркВркжркЧрлА рк╕ркоркп рк╕ркорк╛рккрлНркд ркеркпрлЛ. ркХрлГрккрк╛ ркХрк░рлАркирлЗ рклрк░рлА рккрлНрк░ркпрк╛рк╕ ркХрк░рлЛ.',
      bho: 'SMS рдЪрдпрди рд╕рдордп рд╕рдорд╛рдкреНрдд рд╣реЛ рдЧрдЗрд▓ред рдХреГрдкрдпрд╛ рдлрд┐рд░ рд╕реЗ рдХреЛрд╢рд┐рд╢ рдХрд░реАрдВред',
      hne: 'SMS рдЪрдпрди рд╕рдордп рд╕рдорд╛рдкреНрдд рд╣реЛ рдЧрдпрд╛ред рдХреГрдкрдпрд╛ рдлрд┐рд░ рд╕реЗ рдХреЛрд╢рд┐рд╢ рдХрд░реЛред',
    },
    PERMISSION_DENIED: {
      en: 'Permission to read SMS was denied. Please allow SMS access or copy-paste the message.',
      hi: 'SMS рдкрдврд╝рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рдЕрд╕реНрд╡реАрдХреГрдд рдХрд░ рджреА рдЧрдИред рдХреГрдкрдпрд╛ SMS рдПрдХреНрд╕реЗрд╕ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрдВ рдпрд╛ рд╕рдВрджреЗрд╢ рдХреЛ рдХреЙрдкреА-рдкреЗрд╕реНрдЯ рдХрд░реЗрдВред',
      pa: 'SMS рикрйЬрйНри╣рии рижрйА риЗриЬри╛риЬри╝рид риЕри╕ри╡рйАриХри╛ри░ риХри░ рижри┐рй▒ридрйА риЧриИред риХри┐ри░рикри╛ риХри░риХрйЗ SMS риРриХри╕рйИри╕ рижрйА риЗриЬри╛риЬри╝рид рижри┐риУ риЬри╛риВ ри╕рйБриирйЗри╣рйЗ риирйВрй░ риХри╛рикрйА-рикрйЗри╕риЯ риХри░рйЛред',
      ta: 'SMS рокроЯро┐роХрпНроХ роЕройрпБроородро┐ рооро▒рпБроХрпНроХрокрпНрокроЯрпНроЯродрпБ. SMS роЕрогрпБроХро▓рпИ роЕройрпБроородро┐роХрпНроХро╡рпБроорпН роЕро▓рпНро▓родрпБ роЪрпЖропрпНродро┐ропрпИ роироХро▓рпЖроЯрпБродрпНродрпБ роТроЯрпНроЯро╡рпБроорпН.',
      te: 'SMS р░Ър░жр░╡р░бр░╛р░ир░┐р░Хр░┐ р░Ер░ир▒Бр░ор░др░┐ р░др░┐р░░р░╕р▒Нр░Хр░░р░┐р░Вр░Ър░мр░бр░┐р░Вр░жр░┐. р░жр░пр░Ър▒Зр░╕р░┐ SMS р░пр░╛р░Хр▒Нр░╕р▒Жр░╕р▒НтАМр░ир▒Б р░Ер░ир▒Бр░ор░др░┐р░Вр░Ър░Вр░бр░┐ р░▓р▒Зр░жр░╛ р░╕р░Вр░жр▒Зр░╢р░╛р░ир▒Нр░ир░┐ р░Хр░╛р░кр▒А-р░кр▒Зр░╕р▒Нр░Яр▒Н р░Ър▒Зр░пр░Вр░бр░┐.',
      kn: 'SMS р▓Ур▓жр▓▓р│Б р▓Ер▓ир│Бр▓ор▓др▓┐ р▓ир▓┐р▓░р▓╛р▓Хр▓░р▓┐р▓╕р▓▓р▓╛р▓Чр▓┐р▓жр│Ж. р▓жр▓пр▓╡р▓┐р▓Яр│Нр▓Яр│Б SMS р▓кр│Нр▓░р▓╡р│Зр▓╢р▓╡р▓ир│Нр▓ир│Б р▓Ер▓ир│Бр▓ор▓др▓┐р▓╕р▓┐ р▓Ер▓ер▓╡р▓╛ р▓╕р▓Вр▓жр│Зр▓╢р▓╡р▓ир│Нр▓ир│Б р▓ир▓Хр▓▓р▓┐р▓╕р▓┐-р▓Ер▓Вр▓Яр▓┐р▓╕р▓┐.',
      ml: 'SMS р┤╡р┤╛р┤пр┤┐р┤Хр╡Нр┤Хр┤╛р┤ир╡Бр┤│р╡Нр┤│ р┤Ер┤ир╡Бр┤ор┤др┤┐ р┤ир┤┐р┤░р┤╕р┤┐р┤Ър╡Нр┤Ър╡Б. р┤жр┤пр┤╡р┤╛р┤пр┤┐ SMS р┤Жр┤Хр╡Нр┤╕р┤╕р╡Н р┤Ер┤ир╡Бр┤╡р┤жр┤┐р┤Хр╡Нр┤Хр╡Бр┤Х р┤Ер┤▓р╡Нр┤▓р╡Жр┤Щр╡Нр┤Хр┤┐р╡╜ р┤╕р┤ир╡Нр┤жр╡Зр┤╢р┤В р┤кр┤Хр╡╝р┤др╡Нр┤др┤┐-р┤Тр┤Яр╡Нр┤Яр┤┐р┤Хр╡Нр┤Хр╡Бр┤Х.',
      bn: 'SMS ржкржбрж╝рж╛рж░ ржЕржирзБржорждрж┐ ржкрзНрж░рждрзНржпрж╛ржЦрзНржпрж╛ржи ржХрж░рж╛ рж╣ржпрж╝рзЗржЫрзЗред ржЕржирзБржЧрзНрж░рж╣ ржХрж░рзЗ SMS ржЕрзНржпрж╛ржХрзНрж╕рзЗрж╕рзЗрж░ ржЕржирзБржорждрж┐ ржжрж┐ржи ржмрж╛ ржмрж╛рж░рзНрждрж╛ ржХржкрж┐-ржкрзЗрж╕рзНржЯ ржХрж░рзБржиред',
      gu: 'SMS рк╡рк╛ркВркЪрк╡рк╛ркирлА рккрк░рк╡рк╛ркиркЧрлА ркиркХрк╛рк░рк╡рк╛ркорк╛ркВ ркЖрк╡рлА. ркХрлГрккрк╛ ркХрк░рлАркирлЗ SMS ркПркХрлНрк╕рлЗрк╕ркирлА рккрк░рк╡рк╛ркиркЧрлА ркЖрккрлЛ ркЕркерк╡рк╛ рк╕ркВркжрлЗрк╢ркирлЗ ркХрлЛрккрлА-рккрлЗрк╕рлНркЯ ркХрк░рлЛ.',
      bho: 'SMS рдкрдврд╝реЗ рдХреЗ рдкрд░рдорд┐рд╢рди рдбрд┐рдирд╛рдп рдХрд░ рджрд┐рд╣рд▓ рдЧрдЗрд▓ред рдХреГрдкрдпрд╛ SMS рдПрдХреНрд╕реЗрд╕ рдХреЗ рдкрд░рдорд┐рд╢рди рджреАрдВ рдпрд╛ рд╕рдВрджреЗрд╢ рдХреЗ рдХреЙрдкреА-рдкреЗрд╕реНрдЯ рдХрд░реАрдВред',
      hne: 'SMS рдкрдврд╝рдиреЗ рдХреА рдкрд░рдорд┐рд╢рди рдбрд┐рдирд╛рдп рдХрд░ рджреА рдЧрдИред рдХреГрдкрдпрд╛ SMS рдПрдХреНрд╕реЗрд╕ рдХреА рдкрд░рдорд┐рд╢рди рджреЛ рдпрд╛ рд╕рдВрджреЗрд╢ рдХреЛ рдХреЙрдкреА-рдкреЗрд╕реНрдЯ рдХрд░реЛред',
    },
    UNKNOWN_ERROR: {
      en: 'An error occurred while reading SMS. Please copy-paste the message instead.',
      hi: 'SMS рдкрдврд╝рддреЗ рд╕рдордп рдПрдХ рддреНрд░реБрдЯрд┐ рд╣реБрдИред рдХреГрдкрдпрд╛ рдЗрд╕рдХреЗ рдмрдЬрд╛рдп рд╕рдВрджреЗрд╢ рдХреЛ рдХреЙрдкреА-рдкреЗрд╕реНрдЯ рдХрд░реЗрдВред',
      pa: 'SMS рикрйЬрйНри╣рижрйЗ ри╕риорйЗриВ риЗрй▒риХ риЧри▓ридрйА риЖриИред риХри┐ри░рикри╛ риХри░риХрйЗ риЗри╕ рижрйА римриЬри╛риП ри╕рйБриирйЗри╣рйЗ риирйВрй░ риХри╛рикрйА-рикрйЗри╕риЯ риХри░рйЛред',
      ta: 'SMS рокроЯро┐роХрпНроХрпБроорпН рокрпЛродрпБ роТро░рпБ рокро┐ро┤рпИ роПро▒рпНрокроЯрпНроЯродрпБ. роЕродро▒рпНроХрпБ рокродро┐ро▓ро╛роХ роЪрпЖропрпНродро┐ропрпИ роироХро▓рпЖроЯрпБродрпНродрпБ роТроЯрпНроЯро╡рпБроорпН.',
      te: 'SMS р░Ър░жр▒Бр░╡р▒Бр░др▒Бр░ир▒Нр░ир░кр▒Нр░кр▒Бр░бр▒Б р░Тр░Х р░▓р▒Лр░кр░В р░╕р░Вр░нр░╡р░┐р░Вр░Ър░┐р░Вр░жр░┐. р░жр░пр░Ър▒Зр░╕р░┐ р░мр░жр▒Бр░▓р▒Бр░Чр░╛ р░╕р░Вр░жр▒Зр░╢р░╛р░ир▒Нр░ир░┐ р░Хр░╛р░кр▒А-р░кр▒Зр░╕р▒Нр░Яр▒Н р░Ър▒Зр░пр░Вр░бр░┐.',
      kn: 'SMS р▓Ур▓жр│Бр▓╡р▓╛р▓Ч р▓жр│Лр▓╖ р▓╕р▓Вр▓нр▓╡р▓┐р▓╕р▓┐р▓жр│Ж. р▓жр▓пр▓╡р▓┐р▓Яр│Нр▓Яр│Б р▓мр▓жр▓▓р▓┐р▓Чр│Ж р▓╕р▓Вр▓жр│Зр▓╢р▓╡р▓ир│Нр▓ир│Б р▓ир▓Хр▓▓р▓┐р▓╕р▓┐-р▓Ер▓Вр▓Яр▓┐р▓╕р▓┐.',
      ml: 'SMS р┤╡р┤╛р┤пр┤┐р┤Хр╡Нр┤Хр╡Бр┤ор╡Нр┤кр╡Лр╡╛ р┤Тр┤░р╡Б р┤кр┤┐р┤╢р┤Хр╡Н р┤╕р┤Вр┤нр┤╡р┤┐р┤Ър╡Нр┤Ър╡Б. р┤кр┤Хр┤░р┤В р┤╕р┤ир╡Нр┤жр╡Зр┤╢р┤В р┤кр┤Хр╡╝р┤др╡Нр┤др┤┐-р┤Тр┤Яр╡Нр┤Яр┤┐р┤Хр╡Нр┤Хр╡Бр┤Х.',
      bn: 'SMS ржкржбрж╝рж╛рж░ рж╕ржоржпрж╝ ржПржХржЯрж┐ рждрзНрж░рзБржЯрж┐ ржШржЯрзЗржЫрзЗред ржкрж░рж┐ржмрж░рзНрждрзЗ ржЕржирзБржЧрзНрж░рж╣ ржХрж░рзЗ ржмрж╛рж░рзНрждрж╛ ржХржкрж┐-ржкрзЗрж╕рзНржЯ ржХрж░рзБржиред',
      gu: 'SMS рк╡рк╛ркВркЪркдрлА рк╡ркЦркдрлЗ ркПркХ ркнрлВрк▓ ркеркИ. ркХрлГрккрк╛ ркХрк░рлАркирлЗ ркдрлЗркирк╛ ркмркжрк▓рлЗ рк╕ркВркжрлЗрк╢ркирлЗ ркХрлЛрккрлА-рккрлЗрк╕рлНркЯ ркХрк░рлЛ.',
      bho: 'SMS рдкрдврд╝рддреЗ рд╕рдордп рдПрдЧреЛ рддреНрд░реБрдЯрд┐ рднрдЗрд▓ред рдХреГрдкрдпрд╛ рдПрдХрд░рд╛ рдмрджрд▓реЗ рд╕рдВрджреЗрд╢ рдХреЗ рдХреЙрдкреА-рдкреЗрд╕реНрдЯ рдХрд░реАрдВред',
      hne: 'SMS рдкрдврд╝рддреЗ рд╕рдордп рдПрдХ рддреНрд░реБрдЯрд┐ рднрдИред рдХреГрдкрдпрд╛ рдЗрд╕рдХреЗ рдмрджрд▓реЗ рд╕рдВрджреЗрд╢ рдХреЛ рдХреЙрдкреА-рдкреЗрд╕реНрдЯ рдХрд░реЛред',
    },
  };

  return messages[error]?.[language] || messages[error]?.['en'] || 'An error occurred';
}

/**
 * Check if automatic SMS reading is supported
 */
export function isSMSReadingSupported(): boolean {
  return 'OTPCredential' in window;
}

/**
 * Get recommendation message for users
 */
export function getSMSRecommendation(language: string = 'en'): string {
  const recommendations: Record<string, string> = {
    en: 'ЁЯТб Tip: For best results, copy the SMS from your messaging app and paste it here. This works on all devices!',
    hi: 'ЁЯТб рд╕реБрдЭрд╛рд╡: рд╕рд░реНрд╡реЛрддреНрддрдо рдкрд░рд┐рдгрд╛рдореЛрдВ рдХреЗ рд▓рд┐рдП, рдЕрдкрдиреЗ рдореИрд╕реЗрдЬрд┐рдВрдЧ рдРрдк рд╕реЗ SMS рдХреЛ рдХреЙрдкреА рдХрд░реЗрдВ рдФрд░ рдпрд╣рд╛рдВ рдкреЗрд╕реНрдЯ рдХрд░реЗрдВред рдпрд╣ рд╕рднреА рдбрд┐рд╡рд╛рдЗрд╕ рдкрд░ рдХрд╛рдо рдХрд░рддрд╛ рд╣реИ!',
    pa: 'ЁЯТб ри╕рйБриЭри╛риЕ: ри╕рин ридрйЛриВ ри╡ризрйАриЖ рииридрйАриЬри┐риЖриВ ри▓риИ, риЖрикригрйА риорйИри╕рйЗриЬри┐рй░риЧ риРрик ридрйЛриВ SMS риирйВрй░ риХри╛рикрйА риХри░рйЛ риЕридрйЗ риЗрй▒риерйЗ рикрйЗри╕риЯ риХри░рйЛред риЗри╣ ри╕ри╛ри░рйЗ рибри┐ри╡ри╛риИри╕ри╛риВ 'ридрйЗ риХрй░рио риХри░рижри╛ ри╣рйИ!',
    ta: 'ЁЯТб роХрпБро▒ро┐рокрпНрокрпБ: роЪро┐ро▒роирпНрод роорпБроЯро┐ро╡рпБроХро│рпБроХрпНроХрпБ, роЙроЩрпНроХро│рпН роЪрпЖропрпНродро┐ рокропройрпНрокро╛роЯрпНроЯро┐ро▓ро┐ро░рпБроирпНродрпБ SMS роР роироХро▓рпЖроЯрпБродрпНродрпБ роЗроЩрпНроХрпЗ роТроЯрпНроЯро╡рпБроорпН. роЗродрпБ роЕройрпИродрпНродрпБ роЪро╛родройроЩрпНроХро│ро┐ро▓рпБроорпН ро╡рпЗро▓рпИ роЪрпЖропрпНроХро┐ро▒родрпБ!',
    te: 'ЁЯТб р░Ър░┐р░Яр▒Нр░Хр░╛: р░Йр░др▒Нр░др░о р░лр░▓р░┐р░др░╛р░▓ р░Хр▒Лр░╕р░В, р░ор▒А р░ор▒Жр░╕р▒Зр░Ьр░┐р░Вр░Чр▒Н р░пр░╛р░кр▒Н р░ир▒Бр░Вр░бр░┐ SMS р░ир▒Б р░Хр░╛р░кр▒А р░Ър▒Зр░╕р░┐ р░Зр░Хр▒Нр░Хр░б р░кр▒Зр░╕р▒Нр░Яр▒Н р░Ър▒Зр░пр░Вр░бр░┐. р░Зр░жр░┐ р░Ер░ир▒Нр░ир░┐ р░кр░░р░┐р░Хр░░р░╛р░▓р░▓р▒Л р░кр░ир░┐р░Ър▒Зр░╕р▒Нр░др▒Бр░Вр░жр░┐!',
    kn: 'ЁЯТб р▓╕р▓▓р▓╣р│Ж: р▓Йр▓др│Нр▓др▓о р▓лр▓▓р▓┐р▓др▓╛р▓Вр▓╢р▓Чр▓│р▓┐р▓Чр▓╛р▓Чр▓┐, р▓ир▓┐р▓ор│Нр▓о р▓ор│Жр▓╕р│Зр▓Ьр▓┐р▓Вр▓Чр│Н р▓Ер▓кр│Нр▓▓р▓┐р▓Хр│Зр▓╢р▓ир│НтАМр▓ир▓┐р▓Вр▓ж SMS р▓Ер▓ир│Нр▓ир│Б р▓ир▓Хр▓▓р▓┐р▓╕р▓┐ р▓ор▓др│Нр▓др│Б р▓Зр▓▓р│Нр▓▓р▓┐ р▓Ер▓Вр▓Яр▓┐р▓╕р▓┐. р▓Зр▓жр│Б р▓Ор▓▓р│Нр▓▓р▓╛ р▓╕р▓╛р▓зр▓ир▓Чр▓│р▓▓р│Нр▓▓р▓┐ р▓Хр│Жр▓▓р▓╕ р▓ор▓╛р▓бр│Бр▓др│Нр▓др▓жр│Ж!',
    ml: 'ЁЯТб р┤ир╡Бр┤▒р╡Бр┤Щр╡Нр┤Щр╡Н: р┤ор┤┐р┤Хр┤Ър╡Нр┤Ъ р┤лр┤▓р┤Щр╡Нр┤Щр╡╛р┤Хр╡Нр┤Хр┤╛р┤пр┤┐, р┤ир┤┐р┤Щр╡Нр┤Щр┤│р╡Бр┤Яр╡Ж р┤ор╡Жр┤╕р╡Зр┤Ьр┤┐р┤Вр┤Чр╡Н р┤Жр┤кр╡Нр┤кр┤┐р╡╜ р┤ир┤┐р┤ир╡Нр┤ир╡Н SMS р┤кр┤Хр╡╝р┤др╡Нр┤др┤┐ р┤Зр┤╡р┤┐р┤Яр╡Ж р┤Тр┤Яр╡Нр┤Яр┤┐р┤Хр╡Нр┤Хр╡Бр┤Х. р┤Зр┤др╡Н р┤Ор┤▓р╡Нр┤▓р┤╛ р┤Йр┤кр┤Хр┤░р┤гр┤Щр╡Нр┤Щр┤│р┤┐р┤▓р╡Бр┤В р┤кр╡Нр┤░р┤╡р╡╝р┤др╡Нр┤др┤┐р┤Хр╡Нр┤Хр╡Бр┤ир╡Нр┤ир╡Б!',
    bn: 'ЁЯТб ржкрж░рж╛ржорж░рзНрж╢: рж╕рж░рзНржмрзЛрждрзНрждржо ржлрж▓рж╛ржлрж▓рзЗрж░ ржЬржирзНржп, ржЖржкржирж╛рж░ ржорзЗрж╕рзЗржЬрж┐ржВ ржЕрзНржпрж╛ржк ржерзЗржХрзЗ SMS ржХржкрж┐ ржХрж░рзБржи ржПржмржВ ржПржЦрж╛ржирзЗ ржкрзЗрж╕рзНржЯ ржХрж░рзБржиред ржПржЯрж┐ рж╕ржм ржбрж┐ржнрж╛ржЗрж╕рзЗ ржХрж╛ржЬ ржХрж░рзЗ!',
    gu: 'ЁЯТб ркЯрлАркк: рк╢рлНрк░рлЗрк╖рлНрка рккрк░рк┐ркгрк╛ркорлЛ ркорк╛ркЯрлЗ, ркдркорк╛рк░рлА ркорлЗрк╕рлЗркЬрк┐ркВркЧ ркПрккрлНрк▓рк┐ркХрлЗрк╢ркиркорк╛ркВркерлА SMS ркирлЗ ркХрлЛрккрлА ркХрк░рлЛ ркЕркирлЗ ркЕрк╣рлАркВ рккрлЗрк╕рлНркЯ ркХрк░рлЛ. ркЖ ркмркзрк╛ ркЙрккркХрк░ркгрлЛ рккрк░ ркХрк╛рко ркХрк░рлЗ ркЫрлЗ!',
    bho: 'ЁЯТб рд╕рд▓рд╛рд╣: рдмрдврд╝рд┐рдпрд╛ рдирддреАрдЬрд╛ рдЦрд╛рддрд┐рд░, рдЕрдкрдирд╛ рдореИрд╕реЗрдЬрд┐рдВрдЧ рдРрдк рд╕реЗ SMS рдХреЗ рдХреЙрдкреА рдХрд░реАрдВ рдЖ рдЗрд╣рд╛рдБ рдкреЗрд╕реНрдЯ рдХрд░реАрдВред рдИ рд╕рдм рдбрд┐рд╡рд╛рдЗрд╕ рдкрд░ рдХрд╛рдо рдХрд░реЗ рд▓рд╛!',
    hne: 'ЁЯТб рд╕рд▓рд╛рд╣: рдмрдврд╝рд┐рдпрд╛ рдирддреАрдЬреЗ рдЦрд╛рддрд┐рд░, рдЕрдкрдиреА рдореИрд╕реЗрдЬрд┐рдВрдЧ рдРрдк рд╕реЗ SMS рдХреЛ рдХреЙрдкреА рдХрд░реЛ рдЕрд░ рдпрд╣рд╛рдБ рдкреЗрд╕реНрдЯ рдХрд░реЛред рдпреЛ рд╕рдм рдбрд┐рд╡рд╛рдЗрд╕ рдкрд░ рдХрд╛рдо рдХрд░рддрд╛ рд╣реИ!',
  };

  return recommendations[language] || recommendations['en'];
}
